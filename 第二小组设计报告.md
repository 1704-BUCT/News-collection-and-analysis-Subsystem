# 目录
[toc]

# 绪论

## 设计背景
* 在博物馆系统平台中，仅仅是有对某个博物馆的介绍是不够的，往往用户对博物馆的相关新闻有了解的需求，用户可以通过新闻进一步对博物馆有所认识，因此，此子系统目的在于爬取并分析新闻网上有关于博物馆的新闻并存在数据库中供前端展示，同时支持获取某个特定博物馆特定时间范围的新闻，使设计更加人性化。
## 主要内容和工作
* 需求分析，书写需求规格说明书
* 明确项目管理计划
* 学习Scrapy
* 项目实施

# 需求分析
* 数据获取：爬取主要的新闻网站中的博物馆相关新闻（如百度新闻），可以支持爬取指定时间范围内的新闻。
* 数据加工：对于爬取的信息进行过滤和加工，抽取需要的内容。例如，抽取新闻的发布时间、新闻的标题、新闻的内容、新闻涉及的博物馆等。
* 数据分析：对于加工好的新闻，分析是正面新闻还是负面信息。可采用已有的可直接调用的服务和代码实现。
* 数据定制服务：可以根据指定的某一家博物馆，获取该博物馆的指定时间的新闻，并进行加工分析，得到该博物馆指定时间内的主要新闻，正面新闻和负面新闻。
**ps.详细查询《第二小组需求规格说明书》**

# 数据库新闻表的设计
新闻表-news

| 序号 | 字段        | 类型            | 默认值 | 是否NULL | PK   | FK   | 描述                       |
| ---- | ----------- | --------------- | ------ | -------- | ---- | ---- | -------------------------- |
| 1    | nid         | int（11）       |        | **否**   | 是   | 否   | 序号                       |
| 2    | title       | varchar（500）  |        | **否**   | 否   | 否   | 标题                       |
| 3    | extract     | varchar（2000） |        | 是       | 否   | 否   | 摘要，显示在新闻列表格     |
| 4    | content     | varchar（9000） |        | 是       | 否   | 否   | 新闻正文                   |
| 5    | url         | varchar（2000） |        | **否**   | 否   | 否   | 新闻源地址                 |
| 6    | imgurl      | varchar（2000） |        | 是       | 否   | 否   | 图片地址                   |
| 7    | author      | varchar（500）  |        | **否**   | 否   | 否   | 新闻作者                   |
| 8    | releasetime | **date**        |        | 是       | 否   | 否   | 发布时间                   |
| 9    | nature      | int（50）       | 0      | **否**   | 否   | 否   | 0/1/2                      |
| 10   | sign        | varchar（2000） |        | 是       | 否   | 否   | 有关系的博物馆，以逗号隔开 |



新闻与博物馆关系表-nmr（News and Museums Relations）

| 序号 | 字段  | 类型           | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ----- | -------------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id    | int（11）      |        | **否**   | 是   | 否   | 序号       |
| 2    | title | varchar（255） |        | 是       | 否   | 是   | 新闻标题   |
| 3    | sign  | varchar（255） |        | 是       | 否   | 是   | 博物馆名字 |

# 项目实现流程
1. 首先在学习Scrapy后，书写初始的Scrapy项目，能够爬取基本的数据；
2. 对爬取的数据提取有用的信息；
3. 调用百度云情感分析API对新闻进行情感分析；
4. 通过参数的传递设置URL的格式实现对特定博物馆爬取新闻；
5. 通过提取新闻的发布时间以及参数的传递过滤不在需求时间范围内的新闻；
6. 通过设置UA等，反爬；
7. 将数据存在服务器中的数据库中；
8. 在服务器上配置好项目运行环境并安装好Scrapyd,在本机上安装打包工具Scrapyd-client并编写打包配置.cfg，将项目部署在服务器；
9. 测试部署项目后的接口是可用的，运行测试。
    